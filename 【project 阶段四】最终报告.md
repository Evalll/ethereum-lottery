# 【project 阶段四】最终报告

15331197 林杰群

项目名称：基于智能合约的彩票系统

1. GitHub 地址

https://github.com/Evalll/ethereum-lottery

2. 选题背景、依据

现实生活中的彩票投注，会把所有投注者投注的钱汇集成奖金池，然后随机挑选一个赢家获得奖金池里的钱。这个过程中需要彩票机构的介入，进行买彩票、卖彩票、开奖、发奖等环节。引入智能合约可以去掉彩票机构这一第三方，投注者可以自行买彩票，系统自动开奖、发奖，同时还能保证投注者的匿名性。

3. 使用说明

（1）在 RemixIDE 上部署合约 Lottery.sol，得到合约的地址：

![3.(1)](image/3.(1).png)

由于要用到 Rinkeby 测试，所以 Environment 要选择 Injected Web3；

（2）将合约地址填写到到 lottery-react/src/lottery.js 下：

![3.(2)](image/3.(2).png)

（3）在 lottery-react 目录下执行 $npm start 即可启动程序（需要 npm create-react-app 的支持），在 http://localhost:3000/ 得到程序主页：

![3.(3)](image/3.(3).png)

4. 测试

（1）输入投注金额，利用 MetaMask 进行付款交易：

![4.(1)-1](image/4.(1)-1.png)
![4.(1)-2](image/4.(1)-2.png)

（2）交易完成后刷新页面，可以看到信息更新：

![4.(2)](image/4.(2).png)

（3）待所有投注者投注完成后，即可选出中奖人，奖金将自动发放至中奖账户

![4.(3)-1](image/4.(3)-1.png)

![4.(3)-2](image/4.(3)-2.png)![4.(3)-3](image/4.(3)-3.png)

可以看到 Account 1 获得了奖金 7 ether。

5. 不足与改进

（1）可以设置一个奖金池账户，若开奖后没有获奖人，可以将奖金存进奖金池内，进行下一次开奖，这样比较贴切现实中彩票投注的情况；

（2）每次投注都需要支付一些手续费，对投注用户来说比较不友好。可以通过引入广告等方式，以此的收入支付用户投注的手续费；

（3）玩法可以多样化，可以让用户选择投注号码等，以此来贴近彩票的玩法。

